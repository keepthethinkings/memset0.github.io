# 概率论

> 这东西并不难学。  
> 这片博客主要介绍离散概率、连续概率、期望与微积分……

## 离散型概率入门
---

### 计算方法

首先，我们来讨论一个最原始的问题：抛**一个**质地均匀的硬币，抛中正面的几率是多大？  
显然$50\%$。

那么问题加深一番：抛**两个**质地均匀的硬币，都抛中正面的几率是多大？  
显然$25\%$。

进一步，抛$n$个硬币，全都正面朝上的几率是$0.5 \times 0.5\times 0.5\cdots=0.5^n$.  
如何理解这个概率？全部正面朝上，显然要求第一个朝上、第二个朝上……所有的要求都满足的时候，事件就达成了。

由此总结出**乘法法则**：
>考虑将一个事件$A$拆成小事件$a_i$，小事件必须全部发生。    
>则$A$发生的概率为：$P(A)=P(a_1)\times P(a_2)\times P(a_3)\cdots$

***

但是乘法法则显然不是万能的。我们总会遇到一些乘法法则不好用的情况。  
还是抛$n$次硬币。问恰好$m$次正面朝上的概率。

这时候乘法法则就不太好用了。你要钦定哪些时候抛中$1$，大大增加计算量。    
换一种思路。考虑所有可能的情况，共有$2^n$中；恰好抛中$m$个的情况有$C^m_n$种。故总概率是：  
$\displaystyle P(抛中m个)=\frac{C^m_n}{2^n}$.

这就是计数法则：
>考虑事件所有可能发生的情况总数$S$  
>考虑使得$x$成立的情况总数$T$  
>则有：$\displaystyle P(x)=\frac{T}{S}$  

***

### 例题：Link的游戏

Link很喜欢提交vijos某道题。他的程序随机生成答案，已知对于每个测试点，正确的几率是$0.5$.共有$10$个测试点，求Link通过$9$个测试点的概率。

考虑所有可能情况共$1024$种，其中恰好错掉一个点的情况共$10$种。    
故有：$P(通过9个点)=\frac{10}{1024}$.

### 常识

概率为$0$的事件可能发生；概率为$1$的事件可能不发生。  
一个例子：从数轴$[0,1]$上随机取一个实数，取到$0.5$的概率是$0$，但是它可能发生。  

实际上，在概率论中，一个事件的概率为$0$，表示它**几乎**一定不发生。

## 数学期望
---

数学期望是指：对于每个可能发生的事件$x$，对答案造成$w(x)\times P(x)$的贡献。  
其中$w(x)$是$x$的价值，$P(x)$是$x$发生的概率。

### 计算方法

扔硬币一次。记**抛中正面为得一分，反面不得分**。求得分的期望。

依据定义，我们可以得到答案：    
- 抛中正面，对答案的贡献是$1\times 0.5 = 0.5$.      
- 抛中反面，对答案的贡献是$0 \times 0.5 = 0$.    
 
故最终答案为：$E = 0.5$  

进一步，我们扔硬币$n$次，求得分的期望。   
由于每次抛硬币都会对答案造个$0.5$的贡献，所以$E=0.5n$.  

我们好像发现了世界的奥秘……    
期望的线性性质：  
> 无论何时，期望总是**线性可加**的。

有了这个性质，我们可以大大简化计算。   
考虑一个事件，每次尝试都有$p$的概率做成。问期望尝试多少次，可以把事情做成。

我们定义“完成度”：完全完成是$1$，完全不完成是$0$.那么每次尝试，完成度的期望都是$p$.    
假设期望尝试$c$次，则根据**期望的线性性质**有：$c\cdot p=1$，故$c=\frac{1}{p}$.

## 连续型概率入门
***

上面的例子，可能发生的事情种类是**有限**的，我们可以直接枚举所有情况进行计算，例如古典概型。

但是还有些问题，例如几何概型，可能发生的事情种类是无限的！  

- 从数轴$[0,1]$上随机取一个实数$x$，求$x$的期望。  
- 从$1\times 1$的正方形内随机取三个点，求围成三角形面积的期望。
- ......

面对这种情况，我们已经不能枚举所有的情况，所以开始寄希望于微积分。

考虑黎曼积分的原始形式：**将定义域分为很多份，对每一份构成矩形来求面积。**  
![黎曼积分](https://i4.piimg.com/567571/20c20fbaf8d460a0.png)

假设我们从数轴$[0,1]$上随机取一个实数$x$，求$x$的期望。  

我们在$[0,1]$做$n$个等距的点，并且规定只能在这些点上取。那么取到每个点的概率都是$\frac{1}{n}$.    
考虑取$x$的价值，显然是$w(x)=x$.因此第$i$个点的价值是$\frac{1}{n}\cdot i=\frac{i}{n}$.因此期望是：  
$\displaystyle E(x)\approx\sum_{i=1}^n\frac{1}{n}\cdot\frac{i}{n}=\frac{\sum_{i=1}^n i}{n^2}=\frac{n+1}{2n}=\frac{1}{2}+\frac{1}{2n}$.

显然，我们将点取得越多，这个结果就越精确。当点取到无限多时，上面的结果已经无限接近于真实情况。故最后的答案是：    
$\displaystyle E(x) = \lim_{n \to \infty}(0.5+\frac{1}{2n})=0.5$.

上面的求解方式已经相当类似于微积分的表述了。类似地，我们总结出一般规律：

> 对于一个离散型概率，有$\displaystyle E=\sum w(x)\cdot P(x) \cdot[x为合法事件]$  
>     
> 对于一个连续型概率，有$\displaystyle E=\int w(x)\cdot P(x) \cdot[x为合法事件]$  

微积分博大精深。




